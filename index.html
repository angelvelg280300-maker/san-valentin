<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Para ti ❤️</title>
  <style>
    :root{
      --bg:#f6f0e7; --card:#fff8ef; --text:#2a2a2a; --muted:#5a5a5a;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100svh; display:grid; place-items:center; padding:18px;
      background: linear-gradient(180deg, #2b0036, #130018);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .frame{width:min(980px,96vw); border-radius:26px; padding:16px;
      background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); backdrop-filter:blur(10px);}
    .card{background:var(--card); border-radius:22px; overflow:hidden; box-shadow:0 24px 80px rgba(0,0,0,.35);}
    .content{display:grid; grid-template-columns:1.1fr 1fr; min-height:520px;}
    .left{padding:32px 26px 18px; color:var(--text);}
    .left h1{font-size:18px; font-weight:700; margin:0 0 18px;}
    .poem{font-size:22px; line-height:1.35; margin:0 0 16px; white-space:pre-line;}
    .sig{margin-top:10px; font-size:20px; font-weight:650;}
    .divider{height:1px; background:rgba(0,0,0,.2); margin:16px 0 14px;}
    .timerLabel{font-size:18px; color:var(--muted); margin:0 0 6px;}
    .timer{font-size:34px; font-weight:800; letter-spacing:.3px;}
    .timer small{font-size:16px; font-weight:650; color:var(--muted);}
    .right{background:var(--bg); display:grid; place-items:center; padding:12px;}
    canvas{width:100%; max-width:420px; height:100%; max-height:520px; aspect-ratio:4/5;
      border-radius:18px; background:linear-gradient(180deg,#f7f0e7,#f2e7db); border:1px solid rgba(0,0,0,.12);}
    .bottomBar{height:6px; background:rgba(0,0,0,.08);}
    @media (max-width:860px){ .content{grid-template-columns:1fr;} .poem{font-size:20px;} .timer{font-size:30px;} }
  </style>
</head>
<body>
  <div class="frame">
    <div class="card">
      <div class="content">
        <div class="left">
          <h1 id="title">Para el amor de mi vida:Metztli Rebeca Guadarrama Reyes</h1>
          <div class="poem" id="poem">Si pudiera elegir un lugar
seguro, sería a tu lado.

Cuanto más tiempo estoy
contigo más te amo.</div>
          <div class="sig" id="sig">— Te amo mucho ❤️</div>
          <div class="divider"></div>
          <div class="timerLabel">Mi amor por ti comenzó hace…</div>
          <div class="timer">
            <span id="days">0</span> <small>días</small>
            <span id="hours">00</span> <small>horas</small>
            <span id="mins">00</span> <small>min</small>
            <span id="secs">00</span> <small>seg</small>
          </div>
        </div>
        <div class="right"><canvas id="c"></canvas></div>
      </div>
      <div class="bottomBar"></div>
    </div>
  </div>

<script>
  // ===== PERSONALIZA AQUÍ =====
  const CONFIG = {
    inicioAmor: "2025-08-14T00:00:00", // cambia la fecha real
    growMs: 3500,
    leafDelayMs: 500,
    leafAppearMs: 900,
    maxDepth: 7,
    baseLength: 95,
  };

  // ===== CONTADOR =====
  const startDate = new Date(CONFIG.inicioAmor);
  const elDays = document.getElementById("days");
  const elHours = document.getElementById("hours");
  const elMins = document.getElementById("mins");
  const elSecs = document.getElementById("secs");

  function tickTimer(){
    const now = new Date();
    let diff = Math.max(0, now - startDate);
    const sec = Math.floor(diff / 1000);
    const days = Math.floor(sec / 86400);
    const hours = Math.floor((sec % 86400) / 3600);
    const mins = Math.floor((sec % 3600) / 60);
    const secs = sec % 60;
    elDays.textContent = days.toString();
    elHours.textContent = String(hours).padStart(2,"0");
    elMins.textContent = String(mins).padStart(2,"0");
    elSecs.textContent = String(secs).padStart(2,"0");
  }
  tickTimer();
  setInterval(tickTimer, 1000);

  // ===== CANVAS ÁRBOL =====
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  function resize(){
    const dpr = Math.min(2, window.devicePixelRatio || 1);
    const cssW = canvas.getBoundingClientRect().width;
    const cssH = canvas.getBoundingClientRect().height;
    canvas.width = Math.floor(cssW * dpr);
    canvas.height = Math.floor(cssH * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener("resize", resize);
  resize();

  function clamp(x,a,b){ return Math.max(a, Math.min(b,x)); }
  function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }
  function easeOutBack(t){
    const c1=1.70158, c3=c1+1;
    return 1 + c3*Math.pow(t-1,3) + c1*Math.pow(t-1,2);
  }

  // RNG simple
  let seed = 1234567;
  function rand(){ seed = (seed*1664525 + 1013904223) >>> 0; return seed / 4294967296; }

  const segments = [];
  const leaves = [];

  function addBranch(x1,y1, angle, length, thickness, depth){
    const x2 = x1 + Math.cos(angle) * length;
    const y2 = y1 + Math.sin(angle) * length;
    segments.push({x1,y1,x2,y2, thickness, rs:0, re:0});
    if (depth >= CONFIG.maxDepth || length < 14){
      leaves.push({x:x2, y:y2, appear:0});
      return;
    }
    const branches = (rand() < 0.25) ? 3 : 2;
    for (let i=0;i<branches;i++){
      const spread = (branches===3) ? (i-1) : (i===0?-1:1);
      const a2 = angle + spread*(0.45 + rand()*0.22) + (rand()*0.35 - 0.175);
      const l2 = length * (0.72 + rand()*0.12);
      const th2 = thickness * (0.72 + rand()*0.10);
      addBranch(x2, y2, a2, l2, th2, depth+1);
    }
  }

  function buildTree(){
    segments.length = 0;
    leaves.length = 0;
    const W = canvas.getBoundingClientRect().width;
    const H = canvas.getBoundingClientRect().height;
    const rootX = W * 0.62, rootY = H * 0.96;
    addBranch(rootX, rootY, -Math.PI/2, CONFIG.baseLength, 12, 0);

    const total = segments.length;
    for (let i=0;i<total;i++){
      const start = (i / total) * CONFIG.growMs;
      segments[i].rs = start;
      segments[i].re = start + (520 + rand()*260);
    }
    const leafStart = CONFIG.growMs + CONFIG.leafDelayMs;
    for (let i=0;i<leaves.length;i++){
      leaves[i].appear = leafStart + i*(10 + rand()*14);
    }
  }
  buildTree();

  function drawHeart(x,y, s, alpha){
    ctx.save();
    ctx.globalAlpha = alpha;
    ctx.translate(x,y);
    ctx.scale(s,s);
    const g = ctx.createLinearGradient(-1.2,-1.2, 1.2, 1.2);
    g.addColorStop(0, "hsl(345, 90%, 60%)");
    g.addColorStop(1, "hsl(350, 95%, 70%)");
    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.moveTo(0, -0.35);
    ctx.bezierCurveTo(0.7, -1.15, 1.6, -0.25, 0, 1.0);
    ctx.bezierCurveTo(-1.6, -0.25, -0.7, -1.15, 0, -0.35);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }

  const t0 = performance.now();
  function frame(now){
    const t = now - t0;
    const W = canvas.getBoundingClientRect().width;
    const H = canvas.getBoundingClientRect().height;
    ctx.clearRect(0,0,W,H);

    // sombra base
    ctx.save();
    ctx.globalAlpha = 0.06;
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.ellipse(W*0.62, H*0.965, W*0.22, H*0.03, 0, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();

    // ramas
    for (const seg of segments){
      const local = clamp((t - seg.rs) / (seg.re - seg.rs), 0, 1);
      if (local <= 0) continue;
      const p = easeOutCubic(local);
      const x = seg.x1 + (seg.x2 - seg.x1) * p;
      const y = seg.y1 + (seg.y2 - seg.y1) * p;
      ctx.lineCap = "round";
      ctx.strokeStyle = "rgba(94,59,40,0.95)";
      ctx.lineWidth = Math.max(1.2, seg.thickness);
      ctx.beginPath();
      ctx.moveTo(seg.x1, seg.y1);
      ctx.lineTo(x, y);
      ctx.stroke();
    }

    // hojas (corazones)
    for (let i=0;i<leaves.length;i++){
      const leaf = leaves[i];
      const lt = clamp((t - leaf.appear) / CONFIG.leafAppearMs, 0, 1);
      if (lt <= 0) continue;
      const scale = 6.5 + (easeOutBack(lt) * 7.5);
      const a = clamp(lt*1.2, 0, 1);
      drawHeart(leaf.x, leaf.y, scale/20, a);

      // extra “follaje”
      if (i % 2 === 0 && lt > 0.6){
        const ox = (rand()*22 - 11), oy = (rand()*18 - 9);
        drawHeart(leaf.x + ox, leaf.y + oy, (scale*0.8)/22, a*0.65);
      }
    }

    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
</script>
</body>
</html>
